<!DOCTYPE html>
<!--
  MTGDoku — Main game page.
  Loads the 3×3 grid; row/column labels and puzzle date are filled by js/game.js
  from the /api/board response. Each cell opens a search modal; correct card = matches
  both that row's and column's criteria.
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MTGDoku - Magic Card Guessing Game</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>MTGDoku</h1>
            <p class="subtitle">Guess Magic: The Gathering Cards</p>
            <nav class="header-nav" aria-label="Puzzle navigation">
                <a href="./" class="header-nav-link header-nav-link--active">Today</a>
                <a href="./daily.html" class="header-nav-link">Past puzzles</a>
            </nav>
            <p class="puzzle-date" id="puzzleDate" aria-hidden="true"></p>
        </header>

        <main class="main-content">
            <div class="game-section">
                <div class="controls">
                    <button id="newGameBtn" class="btn btn-primary">New Game</button>
                    <div class="stats">
                        <span class="stat-item">Guesses: <span id="guessCount">0</span>/6</span>
                        <span class="stat-item">Solved: <span id="solvedCount">0</span>/9</span>
                    </div>
                </div>

                <!-- Grid: 3 column labels on top, then 3 rows each with 1 row label + 3 cells -->
                <div class="grid-container">
                    <div class="grid-labels">
                        <div class="label-spacer"></div>
                        <div class="label" id="colLabel1"></div>
                        <div class="label" id="colLabel2"></div>
                        <div class="label" id="colLabel3"></div>
                    </div>

                    <div class="game-grid">
                        <div class="row-label" id="rowLabel1"></div>
                        <button class="grid-cell" data-row="0" data-col="0"></button>
                        <button class="grid-cell" data-row="0" data-col="1"></button>
                        <button class="grid-cell" data-row="0" data-col="2"></button>

                        <div class="row-label" id="rowLabel2"></div>
                        <button class="grid-cell" data-row="1" data-col="0"></button>
                        <button class="grid-cell" data-row="1" data-col="1"></button>
                        <button class="grid-cell" data-row="1" data-col="2"></button>

                        <div class="row-label" id="rowLabel3"></div>
                        <button class="grid-cell" data-row="2" data-col="0"></button>
                        <button class="grid-cell" data-row="2" data-col="1"></button>
                        <button class="grid-cell" data-row="2" data-col="2"></button>
                    </div>
                </div>
            </div>

            <div class="info-section">
                <h2>How to Play</h2>
                <ul>
                    <li>Each row and column represents a Magic card attribute (type, color, mana cost, etc.)</li>
                    <li>Find a card that matches BOTH the row and column criteria</li>
                    <li>You have 6 guesses per cell</li>
                    <li>Complete all 9 cells to win!</li>
                </ul>
            </div>
        </main>

        <!-- Popup: type card name, results from Scryfall; click a card to submit as guess -->
        <div class="modal hidden" id="searchModal">
            <div class="modal-content search-modal">
                <span class="close">&times;</span>
                <h2>Search for a Card</h2>
                <div class="search-container">
                    <input
                        type="text"
                        id="cardSearchInput"
                        class="search-input"
                        placeholder="Type card name (fuzzy search)..."
                        autocomplete="off"
                    >
                </div>
                <div class="search-results" id="searchResults"></div>
            </div>
        </div>

        <!-- Shown on win or game over -->
        <div class="modal hidden" id="gameOverModal">
            <div class="modal-content">
                <h2 id="gameOverTitle"></h2>
                <p id="gameOverMessage"></p>
                <button class="btn btn-primary" id="playAgainBtn">Play Again</button>
            </div>
        </div>
    </div>

    <script src="js/game.js"></script>
</body>
</html>
